<?php

$servername = "localhost";
$username = "root";
$password = "mysql";
$dbname = "ivi";

$conn = new mysqli($servername, $username, $password, $dbname);


if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}


$episode_descriptions = array(
    "Захватывающий поворот событий",
    "Неожиданная развязка",
    "Драматические события",
    "Напряженные моменты",
    "Романтическая линия",
    "Комедийные ситуации",
    "Трогательные сцены",
    "Философские размышления",
    "Динамичные сцены действия",
    "Интригующие загадки",
    "Раскрытие тайн",
    "Эмоциональные переживания",
    "Непредсказуемый сюжет",
    "Острые конфликты",
    "Жизненные перипетии",
    "Глубокие размышления",
    "Увлекательные приключения",
    "Семейные ценности",
    "Социальные проблемы",
    "Исторические события",
    "Фантастические элементы",
    "Мистические явления",
    "Научные открытия",
    "Политические интриги",
    "Криминальные истории",
    "Юмористические моменты",
    "Душевные разговоры",
    "Испытания характера",
    "Личностный рост",
    "Любовные переживания",
    "Дружеские узы",
    "Семейные традиции",
    "Культурные различия",
    "Спортивные достижения",
    "Музыкальные мотивы",
    "Творческие порывы",
    "Бизнес-стратегии",
    "Юридические тонкости",
    "Медицинские случаи",
    "Военные конфликты",
    "Природные катаклизмы",
    "Технологические новинки",
    "Паранормальные явления",
    "Исторические личности",
    "Межличностные отношения",
    "Жизненные выборы",
    "Моральные дилеммы",
    "Психологические проблемы",
    "Социальные предрассудки",
    "Путешествия во времени",
    "Постапокалиптические сценарии",
    "Кулинарные изыски",
    "Спортивные соревнования",
    "Музыкальные выступления",
    "Танцевальные номера",
    "Художественные произведения",
    "Литературные адаптации",
    "Исторические реконструкции",
    "Научно-популярные темы",
    "Технические инновации",
    "Экологические проблемы",
    "Религиозные верования",
    "Мифологические сюжеты",
    "Сверхъестественные силы",
    "Космические путешествия",
    "Виртуальные миры",
    "Шпионские интриги",
    "Судебные процессы",
    "Политические скандалы"
);

$sql = "SELECT id_series, number_seasons FROM series";
$result = $conn->query($sql);

if ($result->num_rows > 0) {
    while ($row = $result->fetch_assoc()) {
        $series_id = $row['id_series'];
        $num_seasons = $row['number_seasons'];

        for ($season = 1; $season <= $num_seasons; $season++) {
            $num_episodes = mt_rand(3, 20); 

            for ($episode = 1; $episode <= $num_episodes; $episode++) {
                $episode_name = "Серия" . $episode;
                $episode_number = $episode;
                $duration = mt_rand(30, 180); 
                $description_index = mt_rand(0, count($episode_descriptions) - 1);
                $description = $episode_descriptions[$description_index];

                $sql = "INSERT INTO episode (name_episode, number_season, number_episode, duration_episode, description_episode, id_series)
                        VALUES ('$episode_name', $season, $episode_number, $duration, '$description', $series_id)";

                if ($conn->query($sql) === FALSE) {
                    echo "Error: " . $sql . "<br>" . $conn->error;
                }
            }
        }
    }
} else {
    echo "No series found";
}

$conn->close();
?>
?>